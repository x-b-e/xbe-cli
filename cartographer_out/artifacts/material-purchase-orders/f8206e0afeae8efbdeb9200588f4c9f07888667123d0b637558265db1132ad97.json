{
  "id": "f8206e0afeae8efbdeb9200588f4c9f07888667123d0b637558265db1132ad97",
  "full_path": "do material-purchase-orders create",
  "description": "Create a material purchase order.",
  "permissions": "Admin users, users who are members of the broker on the purchase order, or customer managers for the associated customer can create material purchase orders.",
  "side_effects": "Creates a material purchase order record.",
  "validation_notes": "Required flags: broker, material-supplier, material-type, unit-of-measure, quantity. unit-of-measure must be a valid primary material unit of measure (load or ton). quantity must be greater than 0. Job site requires customer to be set, and job site must belong to that customer. Customer and material supplier must share the same broker as the purchase order. Material site must belong to the material supplier. material-type must be generic or related to the material supplier. transaction-at-min and transaction-at-max expect ISO 8601 datetimes.",
  "flags": [
    {
      "name": "--broker",
      "aliases": null,
      "required": true,
      "type": "string",
      "description": "Broker ID (required)",
      "default": null,
      "validation": null
    },
    {
      "name": "--material-supplier",
      "aliases": null,
      "required": true,
      "type": "string",
      "description": "Material supplier ID (required)",
      "default": null,
      "validation": null
    },
    {
      "name": "--material-type",
      "aliases": null,
      "required": true,
      "type": "string",
      "description": "Material type ID (required)",
      "default": null,
      "validation": null
    },
    {
      "name": "--unit-of-measure",
      "aliases": null,
      "required": true,
      "type": "string",
      "description": "Unit of measure ID (required)",
      "default": null,
      "validation": "must be load or ton"
    },
    {
      "name": "--quantity",
      "aliases": null,
      "required": true,
      "type": "string",
      "description": "Ordered quantity (required)",
      "default": null,
      "validation": "must be greater than 0"
    },
    {
      "name": "--status",
      "aliases": null,
      "required": false,
      "type": "enum",
      "description": "Initial status (editing,approved,closed)",
      "default": null,
      "validation": "editing,approved,closed"
    },
    {
      "name": "--is-managing-redemption",
      "aliases": null,
      "required": false,
      "type": "boolean",
      "description": "Whether this order manages redemption",
      "default": null,
      "validation": null
    },
    {
      "name": "--transaction-at-min",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Minimum transaction datetime (ISO 8601)",
      "default": null,
      "validation": "ISO 8601 datetime"
    },
    {
      "name": "--transaction-at-max",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Maximum transaction datetime (ISO 8601)",
      "default": null,
      "validation": "ISO 8601 datetime"
    },
    {
      "name": "--external-purchase-order-id",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "External purchase order ID",
      "default": null,
      "validation": null
    },
    {
      "name": "--external-sales-order-id",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "External sales order ID",
      "default": null,
      "validation": null
    },
    {
      "name": "--customer",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Customer ID",
      "default": null,
      "validation": "required if --job-site is set"
    },
    {
      "name": "--material-site",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Material site ID",
      "default": null,
      "validation": "must belong to the material supplier"
    },
    {
      "name": "--job-site",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Job site ID",
      "default": null,
      "validation": "requires --customer"
    }
  ],
  "sources": [
    {
      "repo_name": "cli",
      "file_path": "internal/cli/do_material_purchase_orders_create.go"
    },
    {
      "repo_name": "server",
      "file_path": "app/models/material_purchase_order.rb"
    },
    {
      "repo_name": "server",
      "file_path": "app/policies/material_purchase_order_policy.rb"
    }
  ]
}

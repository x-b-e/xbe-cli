{
  "id": "24ab3fd7f25ea3bb217a8d06d5e55b5f2acbae5fabf9da0c90cd0a2f35e5b961",
  "full_path": "summarize shift-summary create",
  "description": "Create a shift summary.",
  "permissions": "Any authenticated user (persisted) can create a shift summary.",
  "side_effects": null,
  "validation_notes": "--start-on and --end-on are required and must be valid dates (YYYY-MM-DD); end-on must be on or after start-on. --filters must be a valid JSON object; each --filter entry must be key=value with a non-empty key. group-by must be non-empty and only include allowed attributes: broker, business_unit, contractor, customer, date, day_or_night, dow, driver, driver_day, expects_time_cards, has_trips, is_stockpiling, job_number, job_site_state_code, managed, month, planner, raw_job_number, start_hour, tender_job_schedule_shift, trailer, trailer_classification, trucker, week, year. If no metrics are specified and --all-metrics is not set, the default metrics are shift_count, hours_sum, tons_sum, trip_sum. Filters are supported for: broker, business_unit, contractor, customer, date, driver, job_number, managed, planner, time_card_invoiced, time_card_status, timely_dispatched, trucker, trailer_classification, and all group-by attributes.",
  "flags": [
    {
      "name": "--all-metrics",
      "aliases": null,
      "required": false,
      "type": "boolean",
      "description": "Include all metrics returned by the API",
      "default": "false",
      "validation": null
    },
    {
      "name": "--end-on",
      "aliases": null,
      "required": true,
      "type": "string",
      "description": "End date (YYYY-MM-DD) [required]",
      "default": null,
      "validation": "Must be a valid date in YYYY-MM-DD format and on or after --start-on."
    },
    {
      "name": "--filter",
      "aliases": null,
      "required": false,
      "type": "array",
      "description": "Filter in key=value format (repeatable)",
      "default": null,
      "validation": "Each entry must be key=value with a non-empty key; keys should be supported filters (broker, business_unit, contractor, customer, date, driver, job_number, managed, planner, time_card_invoiced, time_card_status, timely_dispatched, trucker, trailer_classification, or a group-by attribute)."
    },
    {
      "name": "--filters",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Filters JSON object (e.g. '{\"broker\":\"123\"}')",
      "default": null,
      "validation": "Must be a valid JSON object; keys should be supported filters (broker, business_unit, contractor, customer, date, driver, job_number, managed, planner, time_card_invoiced, time_card_status, timely_dispatched, trucker, trailer_classification, or a group-by attribute)."
    },
    {
      "name": "--group-by",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Group by attributes (comma-separated). Defaults to driver unless set.",
      "default": "driver",
      "validation": "Comma-separated list of allowed group-by attributes: broker, business_unit, contractor, customer, date, day_or_night, dow, driver, driver_day, expects_time_cards, has_trips, is_stockpiling, job_number, job_site_state_code, managed, month, planner, raw_job_number, start_hour, tender_job_schedule_shift, trailer, trailer_classification, trucker, week, year."
    },
    {
      "name": "--metric",
      "aliases": null,
      "required": false,
      "type": "array",
      "description": "Metric column to include (repeatable)",
      "default": null,
      "validation": "Each metric should be one of: shift_count, hours_sum, gps_tracked_hours_pct, driver_days, shift_day_count, hours_per_driver_day, time_card_submission_latency_median, time_card_submission_latency_exceeds_twelve_hours_pct, time_card_approval_latency_median, time_card_creation_pct, time_card_submission_pct, time_card_pre_approval_latency_median, time_card_pre_approval_pct, approved_via_pre_approval_pct, time_card_overall_approval_pct, time_card_audit_pct, check_in_pct, driver_check_in_pct, timely_check_in_pct, check_in_timeliness_score_avg, check_in_directness_score_avg, check_in_distance_miles_avg, check_in_nearby_score_avg, on_time_score_avg, check_in_minutes_from_start_at_avg, revenue_sum, revenue_shortfall_sum, cost_sum, cost_shortfall_sum, margin_sum, margin_pct, tons_sum, trip_sum, tons_per_trip_avg, trip_minutes_sum, trip_minutes_avg, trip_miles_sum, trip_miles_avg, cost_per_ton, cost_per_hour, trip_minutes_pct, tons_per_truck_hour, production_incident_count, production_incident_duration_hours, production_incident_duration_hours_avg, production_incident_impact_hours, production_incident_duration_pct, negative_rating_avg, trips_per_hour_relative_efficiency_pct_avg."
    },
    {
      "name": "--metrics",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Metric columns to include (comma-separated)",
      "default": null,
      "validation": "Comma-separated metrics; each should be one of: shift_count, hours_sum, gps_tracked_hours_pct, driver_days, shift_day_count, hours_per_driver_day, time_card_submission_latency_median, time_card_submission_latency_exceeds_twelve_hours_pct, time_card_approval_latency_median, time_card_creation_pct, time_card_submission_pct, time_card_pre_approval_latency_median, time_card_pre_approval_pct, approved_via_pre_approval_pct, time_card_overall_approval_pct, time_card_audit_pct, check_in_pct, driver_check_in_pct, timely_check_in_pct, check_in_timeliness_score_avg, check_in_directness_score_avg, check_in_distance_miles_avg, check_in_nearby_score_avg, on_time_score_avg, check_in_minutes_from_start_at_avg, revenue_sum, revenue_shortfall_sum, cost_sum, cost_shortfall_sum, margin_sum, margin_pct, tons_sum, trip_sum, tons_per_trip_avg, trip_minutes_sum, trip_minutes_avg, trip_miles_sum, trip_miles_avg, cost_per_ton, cost_per_hour, trip_minutes_pct, tons_per_truck_hour, production_incident_count, production_incident_duration_hours, production_incident_duration_hours_avg, production_incident_impact_hours, production_incident_duration_pct, negative_rating_avg, trips_per_hour_relative_efficiency_pct_avg."
    },
    {
      "name": "--start-on",
      "aliases": null,
      "required": true,
      "type": "string",
      "description": "Start date (YYYY-MM-DD) [required]",
      "default": null,
      "validation": "Must be a valid date in YYYY-MM-DD format."
    }
  ],
  "sources": [
    {
      "repo_name": "cli",
      "file_path": "internal/cli/do_shift_summary_create.go"
    },
    {
      "repo_name": "server",
      "file_path": "app/policies/shift_summary_policy.rb"
    },
    {
      "repo_name": "server",
      "file_path": "app/resources/v1/shift_summary_resource.rb"
    },
    {
      "repo_name": "server",
      "file_path": "app/models/shift_summary.rb"
    }
  ]
}

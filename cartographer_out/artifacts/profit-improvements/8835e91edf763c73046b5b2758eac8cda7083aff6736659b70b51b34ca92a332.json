{
  "id": "8835e91edf763c73046b5b2758eac8cda7083aff6736659b70b51b34ca92a332",
  "full_path": "do profit-improvements create",
  "description": "Create a profit improvement.",
  "permissions": "Allowed for admins. Non-admins can create only for an organization where they are a member.",
  "side_effects": "Creates a profit improvement record and ensures subscriptions exist for created_by/owned_by/validated_by users.",
  "validation_notes": "--title, --profit-improvement-category, and an organization are required; organization must be provided as Type|ID or via --organization-type and --organization-id together. organization_type must be Broker. Date fields expect YYYY-MM-DD. impact-frequency-estimated and impact-frequency-validated must be one_time or recurring; impact-interval-estimated and impact-interval-validated must be monthly, quarterly, or annual. impact_interval_estimated is required when impact_frequency_estimated is recurring and must be absent when one_time; impact_interval_validated is required when impact_frequency_validated is recurring and must be absent when one_time. amount_estimated must be > 0 when provided; amount_validated must be >= 0 when provided. gain_share_fee_percentage must be between 0 and 1; if status is invoiced it must be > 0. gain_share_fee_start_on is required when gain_share_fee_percentage is set; gain_share_fee_end_on must be >= gain_share_fee_start_on when both set. impact_end_on_estimated must be >= impact_start_on_estimated when both set; impact_end_on_validated must be >= impact_start_on_validated when both set; impact_start_on_estimated is required when impact_end_on_estimated is set; impact_start_on_validated is required when impact_end_on_validated is set. validated_by is required when status is validated and must belong to the organization with can_validate_profit_improvements; owned_by must be a member of the organization. If original is set, the status is forced to duplicate.",
  "flags": [
    {
      "name": "--title",
      "aliases": null,
      "required": true,
      "type": "string",
      "description": "Title (required)",
      "default": null,
      "validation": null
    },
    {
      "name": "--profit-improvement-category",
      "aliases": null,
      "required": true,
      "type": "string",
      "description": "Profit improvement category ID (required)",
      "default": null,
      "validation": null
    },
    {
      "name": "--organization",
      "aliases": null,
      "required": true,
      "type": "string",
      "description": "Organization in Type|ID format (e.g., Broker|123)",
      "default": null,
      "validation": "Type|ID"
    },
    {
      "name": "--description",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Description",
      "default": null,
      "validation": null
    },
    {
      "name": "--status",
      "aliases": null,
      "required": false,
      "type": "enum",
      "description": "Status",
      "default": null,
      "validation": "draft/submitted/rejected/in_progress/completed/validated/recommended/approved/invoiced/cancelled/duplicate"
    },
    {
      "name": "--amount-estimated",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Estimated amount",
      "default": null,
      "validation": "number (> 0)"
    },
    {
      "name": "--impact-frequency-estimated",
      "aliases": null,
      "required": false,
      "type": "enum",
      "description": "Estimated impact frequency (one_time/recurring)",
      "default": null,
      "validation": "one_time/recurring"
    },
    {
      "name": "--impact-interval-estimated",
      "aliases": null,
      "required": false,
      "type": "enum",
      "description": "Estimated impact interval (monthly/quarterly/annual)",
      "default": null,
      "validation": "monthly/quarterly/annual"
    },
    {
      "name": "--impact-start-on-estimated",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Estimated impact start date (YYYY-MM-DD)",
      "default": null,
      "validation": "YYYY-MM-DD"
    },
    {
      "name": "--impact-end-on-estimated",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Estimated impact end date (YYYY-MM-DD)",
      "default": null,
      "validation": "YYYY-MM-DD"
    },
    {
      "name": "--amount-validated",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Validated amount",
      "default": null,
      "validation": "number (>= 0)"
    },
    {
      "name": "--impact-frequency-validated",
      "aliases": null,
      "required": false,
      "type": "enum",
      "description": "Validated impact frequency (one_time/recurring)",
      "default": null,
      "validation": "one_time/recurring"
    },
    {
      "name": "--impact-interval-validated",
      "aliases": null,
      "required": false,
      "type": "enum",
      "description": "Validated impact interval (monthly/quarterly/annual)",
      "default": null,
      "validation": "monthly/quarterly/annual"
    },
    {
      "name": "--impact-start-on-validated",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Validated impact start date (YYYY-MM-DD)",
      "default": null,
      "validation": "YYYY-MM-DD"
    },
    {
      "name": "--impact-end-on-validated",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Validated impact end date (YYYY-MM-DD)",
      "default": null,
      "validation": "YYYY-MM-DD"
    },
    {
      "name": "--gain-share-fee-percentage",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Gain share fee percentage (0-1)",
      "default": null,
      "validation": "0-1"
    },
    {
      "name": "--gain-share-fee-start-on",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Gain share fee start date (YYYY-MM-DD)",
      "default": null,
      "validation": "YYYY-MM-DD"
    },
    {
      "name": "--gain-share-fee-end-on",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Gain share fee end date (YYYY-MM-DD)",
      "default": null,
      "validation": "YYYY-MM-DD"
    },
    {
      "name": "--original",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Original profit improvement ID",
      "default": null,
      "validation": null
    },
    {
      "name": "--created-by",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Created-by user ID",
      "default": null,
      "validation": null
    },
    {
      "name": "--owned-by",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Owned-by user ID",
      "default": null,
      "validation": null
    },
    {
      "name": "--validated-by",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Validated-by user ID",
      "default": null,
      "validation": null
    },
    {
      "name": "--organization-type",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Organization type (optional if --organization is set)",
      "default": null,
      "validation": "requires --organization-id when used"
    },
    {
      "name": "--organization-id",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Organization ID (optional if --organization is set)",
      "default": null,
      "validation": "requires --organization-type when used"
    }
  ],
  "sources": [
    {
      "repo_name": "cli",
      "file_path": "internal/cli/do_profit_improvements_create.go"
    },
    {
      "repo_name": "server",
      "file_path": "app/policies/profit_improvement_policy.rb"
    },
    {
      "repo_name": "server",
      "file_path": "app/models/profit_improvement.rb"
    },
    {
      "repo_name": "server",
      "file_path": "app/resources/v1/profit_improvement_resource.rb"
    }
  ]
}

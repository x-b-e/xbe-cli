{
  "id": "faa82d1645f10d8d24228fb5585693239a3b792337e203495b738951fccb4def",
  "full_path": "do trips create",
  "description": "Create a trip.",
  "permissions": "Admin users can create trips. Non-admin users can create trips if they are members of the customer for any job sites on the trip, members of the broker for any material sites on the trip, or (when a tender job schedule shift is present) are the driver/shift driver/driver manager for that shift, a manager member of the trucker, or a customer member for the shift. If the trip source is a user, creation is allowed when the source user matches the current user; if the source is a raw material transaction, the user must be a member of that broker.",
  "side_effects": "Creates a trip. If no source is provided, the server sets the trip source to the current user. Setting submitted minutes records the current user as submitted_travel_by.",
  "validation_notes": "CLI requires --origin-type, --origin-id, --destination-type, and --destination-id. origin_type and destination_type must be one of JobSite, MaterialSite, or ParkingSite. origin_at must be before destination_at. Origin and destination must be different. unloaded_subject_type (if set) must be TenderJobScheduleShift or TruckerShiftSet. Material/job sites must be in scope for the tender job schedule shift when present, and the tender job schedule shift must be a broker tender. Trips with material transactions require both a job site and a material site. Unloaded trips cannot have material transactions. Unloaded subject and tender job schedule shift must be in scope. User-sourced trips require a tender job schedule shift (or a user-sourced material transaction with a shift).",
  "flags": [
    {
      "name": "origin-type",
      "required": true,
      "type": "string",
      "description": "Origin type (e.g., material-sites, job-sites, parking-sites)",
      "validation": "Expected to map to JobSite, MaterialSite, or ParkingSite"
    },
    {
      "name": "origin-id",
      "required": true,
      "type": "string",
      "description": "Origin ID"
    },
    {
      "name": "destination-type",
      "required": true,
      "type": "string",
      "description": "Destination type"
    },
    {
      "name": "destination-id",
      "required": true,
      "type": "string",
      "description": "Destination ID"
    },
    {
      "name": "tender-job-schedule-shift",
      "required": false,
      "type": "string",
      "description": "Tender job schedule shift ID"
    },
    {
      "name": "driver-day",
      "required": false,
      "type": "string",
      "description": "Driver day ID"
    },
    {
      "name": "origin-at",
      "required": false,
      "type": "string",
      "description": "Origin time (ISO 8601)",
      "validation": "ISO 8601 timestamp"
    },
    {
      "name": "origin-notes",
      "required": false,
      "type": "string",
      "description": "Origin notes"
    },
    {
      "name": "destination-at",
      "required": false,
      "type": "string",
      "description": "Destination time (ISO 8601)",
      "validation": "ISO 8601 timestamp"
    },
    {
      "name": "destination-notes",
      "required": false,
      "type": "string",
      "description": "Destination notes"
    },
    {
      "name": "submitted-mileage",
      "required": false,
      "type": "string",
      "description": "Submitted mileage"
    },
    {
      "name": "submitted-minutes",
      "required": false,
      "type": "string",
      "description": "Submitted minutes"
    }
  ],
  "sources": [
    {
      "repo_name": "cli",
      "file_path": "internal/cli/do_trips_create.go"
    },
    {
      "repo_name": "server",
      "file_path": "app/resources/v1/trip_resource.rb"
    },
    {
      "repo_name": "server",
      "file_path": "app/policies/trip_policy.rb"
    },
    {
      "repo_name": "server",
      "file_path": "app/models/trip.rb"
    }
  ]
}

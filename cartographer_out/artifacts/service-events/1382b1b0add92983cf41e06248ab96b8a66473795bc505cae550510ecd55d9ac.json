{
  "id": "1382b1b0add92983cf41e06248ab96b8a66473795bc505cae550510ecd55d9ac",
  "full_path": "do service-events create",
  "description": "Create a service event.",
  "permissions": "Allowed when the service event has a tender job schedule shift and the user is an admin, the shift seller operations contact, the shift driver, the tender seller operations contact, a manager member of the trucker when non-drivers can check in, or a practical shift member.",
  "side_effects": "Creates a service event. After create, may send a time card notification to the shift seller operations contact when the event is ready_to_work and the shift requires admin approval; after commit, queues DriverDayRecapPostSchedulerWorker if the shift has a trucker shift set and touches the tender job schedule shift.",
  "validation_notes": "--tender-job-schedule-shift, --occurred-at, and --kind are required. --kind must be ready_to_work or work_start_at. --occurred-at must be present and within the allowed window around the shift start: not earlier than 4 hours before start (16 hours for flexible shifts) and not later than 24 hours after. The tender job schedule shift must belong to a broker tender. If kind is ready_to_work, it must be unique per tender job schedule shift. --occurred-latitude and --occurred-longitude must be provided together and must be valid coordinates when provided.",
  "flags": [
    {
      "name": "--tender-job-schedule-shift",
      "aliases": null,
      "required": true,
      "type": "string",
      "description": "Tender job schedule shift ID (required)",
      "default": null,
      "validation": null
    },
    {
      "name": "--occurred-at",
      "aliases": null,
      "required": true,
      "type": "string",
      "description": "Event timestamp (ISO 8601, required)",
      "default": null,
      "validation": "ISO 8601 timestamp"
    },
    {
      "name": "--kind",
      "aliases": null,
      "required": true,
      "type": "enum",
      "description": "Event kind (ready_to_work, work_start_at)",
      "default": null,
      "validation": "ready_to_work, work_start_at"
    },
    {
      "name": "--note",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Event note",
      "default": null,
      "validation": null
    },
    {
      "name": "--occurred-latitude",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Event latitude",
      "default": null,
      "validation": "Must be provided with --occurred-longitude"
    },
    {
      "name": "--occurred-longitude",
      "aliases": null,
      "required": false,
      "type": "string",
      "description": "Event longitude",
      "default": null,
      "validation": "Must be provided with --occurred-latitude"
    }
  ],
  "sources": [
    {
      "repo_name": "cli",
      "file_path": "internal/cli/do_service_events_create.go"
    },
    {
      "repo_name": "cli",
      "file_path": "internal/cli/do_service_events.go"
    },
    {
      "repo_name": "server",
      "file_path": "app/policies/service_event_policy.rb"
    },
    {
      "repo_name": "server",
      "file_path": "app/resources/v1/service_event_resource.rb"
    },
    {
      "repo_name": "server",
      "file_path": "app/models/service_event.rb"
    }
  ]
}
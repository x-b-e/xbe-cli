{
  "id": "b6230a0291adf75201f3bafe52d6cce485e0e9d1122012e00b3712306c97efd7",
  "full_path": "do equipment-movement-trip-customer-cost-allocations create",
  "description": "Create a customer cost allocation for an equipment movement trip.",
  "permissions": "Access is delegated to the related equipment movement trip via EquipmentMovementTripCustomerCostAllocationPolicy; the user must be authorized on the trip to create its cost allocation.",
  "side_effects": "Creates an equipment movement trip customer cost allocation; if is_explicit is false or unset, the allocation is auto-built from trip requirements before validation.",
  "validation_notes": "--trip is required. If --allocation is provided, it must be valid JSON. Allocation details must include customer_id and percentage; percentage must be between 0 and 1 and all percentages must sum to 1. Allocation details must only reference customers from the trip requirements. Allocation details cannot be nil.",
  "flags": [
    {
      "name": "--trip",
      "required": true,
      "type": "string",
      "description": "Equipment movement trip ID (e.g., 123)."
    },
    {
      "name": "--is-explicit",
      "required": false,
      "type": "boolean",
      "description": "Mark allocation as explicit."
    },
    {
      "name": "--allocation",
      "required": false,
      "type": "string",
      "description": "Allocation JSON string (e.g., {\"details\":[{\"customer_id\":456,\"percentage\":\"1\"}]}).",
      "validation": "Must be valid JSON."
    }
  ],
  "sources": [
    {
      "repo_name": "cli",
      "file_path": "internal/cli/do_equipment_movement_trip_customer_cost_allocations_create.go"
    },
    {
      "repo_name": "server",
      "file_path": "app/models/equipment_movement_trip_customer_cost_allocation.rb"
    },
    {
      "repo_name": "server",
      "file_path": "app/resources/v1/equipment_movement_trip_customer_cost_allocation_resource.rb"
    },
    {
      "repo_name": "server",
      "file_path": "app/policies/equipment_movement_trip_customer_cost_allocation_policy.rb"
    }
  ]
}